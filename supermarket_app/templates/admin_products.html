{% extends 'base.html' %}

{% block content %}
<h1>Admin - Products</h1>

<form method="post" action="{{ url_for('admin.create_product') }}" style="display:grid;grid-template-columns:repeat(6,1fr);gap:8px;align-items:end;margin-bottom:16px">
	<input name="name" placeholder="Name" required>
	<input name="price_cents" placeholder="Price (cents)" type="number" required>
	<input name="inventory" placeholder="Inventory" type="number" value="0">
	<select name="category_id">
		<option value="">No Category</option>
		{% for c in categories %}
		<option value="{{ c.id }}">{{ c.name }}</option>
		{% endfor %}
	</select>
	<input name="barcode" placeholder="Barcode">
	<button>Create</button>
	<input name="description" placeholder="Description" style="grid-column:1/5">
	<input name="image_url" placeholder="Image URL" style="grid-column:5/7">
</form>

<table>
	<thead>
		<tr><th>Name</th><th>Price</th><th>Stock</th><th>Category</th><th>Barcode</th><th></th></tr>
	</thead>
	<tbody>
		{% for p in products %}
		<tr>
			<td>{{ p.name }}</td>
			<td>${{ '%.2f' % (p.price_cents/100) }}</td>
			<td>{{ p.inventory }}</td>
			<td>{{ p.category.name if p.category else '-' }}</td>
			<td>{{ p.barcode or '-' }}</td>
			<td>
				<form method="post" action="{{ url_for('admin.delete_product', product_id=p.id) }}">
					<button>Delete</button>
				</form>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}

